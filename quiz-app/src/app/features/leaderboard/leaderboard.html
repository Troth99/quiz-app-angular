<div class="leaderboard-container" *ngIf="leaderBoard$ | async as users; else loading">
  <h1>Leaderboard</h1>

  <div *ngIf="users.length > 0; else noUsers">
    <div class="leaderboard-list">
      <div
        *ngFor="let user of users; let i = index; trackBy: trackByUser"
        class="leaderboard-row"
        (click)="onUserClick(user)"
        tabindex="0"
        role="button"
      >
        <div class="leaderboard-position">{{ i + 1 }}.</div>
        <img
          [src]="user.photoUrl || 'default-profile.jpg'"
          [alt]="user.displayName"
          class="leaderboard-avatar"
        />
        <div class="leaderboard-name">{{ user.displayName }}</div>
        <div class="leaderboard-stats">
          <div class="leaderboard-stat-item">
            🏆 {{ user.quizStats.totalScore }} points
          </div>
          <div class="leaderboard-stat-item">
            📝 {{ user.quizStats.quizzesTaken }} quizzes
          </div>
          <div class="leaderboard-stat-item">
            ⏱️ {{ user.quizStats.timeSpent | formatTime }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <ng-template #noUsers>
    <p class="message">No users in the leaderboard.</p>
  </ng-template>
</div>

<ng-template #loading>
  <div class="loading-overlay">
    <app-loading></app-loading>
  </div>
</ng-template>
